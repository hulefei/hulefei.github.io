<!DOCTYPE html>
<html>
<meta  lang="en" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#fff" id="theme-color">
  <link rel="icon" href="/img/icon.jpg">
  <title>小冰狼</title>
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
    var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
      }
    };
    setDarkmode();
  </script>
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
  </script>
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_vpj3dq9ceqa.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  <link rel="preload" href="//cdn.jsdelivr.net/npm/fslightbox@3.1.0/index.min.js" as="script">
  
  
  <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
  
  <link rel="prefetch" href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" as="script">
  
  
  
  
  
<link rel="stylesheet" href="/css/main.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_vpj3dq9ceqa.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">

  
  
  
  
  
  <link href="/js/lib/prism/prism-tomorrow.min.css" rel="stylesheet" data-prism="prism-tomorrow">
  
  
  
<link rel="stylesheet" href="/js/lib/prism/prism-line-numbers.min.css">

  
  
  
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <div class="wrapper">
    
    <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
      <img class="navbar-logo-img" src="/img/icon.jpg">
      
      <span class="navbar-logo-dsc">小冰狼</span>
    </span>
  </div>
  <div class="navbar-menu">
    
    <a href="/" class="navbar-menu-item">Home </a>
    
    <a href="/archives" class="navbar-menu-item">Archive </a>
    
    <a href="/tags" class="navbar-menu-item">Tags </a>
    
    <a href="/categories" class="navbar-menu-item">Categories </a>
    
    <a href="/about" class="navbar-menu-item">About </a>
    
    <a href="/links" class="navbar-menu-item">Friends </a>
    
    <a class="navbar-menu-item darknavbar" id="dark"><i class="iconfont icon-weather"></i></a>
  </div>
</nav>
    
    <div class="section-wrap">
      <div class="container">
        <div class="columns">
          <main class="main-column">
<div class="image-wrapper">
  <img src="/img/banners/ue4.jpg" data-src="/img/banners/ue4.jpg"
    srcset="data:image/svg+xml,%3Csvg%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20viewBox=&#39;0%200%20300%20300&#39;%3E%3C/svg%3E"
    class="image lozad">
</div>

<article class="card card-content">
  <header>
    <h1 class="post-title">
      UE4 GamePlay
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2021-05-05T16:00:00.000Z" style="display: flex; align-items: center;">
      <i class="iconfont icon-calendar" style="margin-right: 2px;"></i>
      <span>2021-05-06</span>
    </time>
    
    <span class="dot"></span>
    
    <a href="/categories/笔记/" class="post-meta-link">笔记</a>
    
    
    
    <span class="dot"></span>
    <span>1.6k words</span>
    
  </div>
  
  <div class="post-meta post-show-meta" style="margin-top: -10px;">
    <div style="display: flex; align-items: center;">
      <i class="iconfont icon-biaoqian" style="margin-right: 2px; font-size: 1.15rem;"></i>
      
      
        <a href="/tags/UE4/" class="post-meta-link">UE4</a>
      
    </div>
  </div>
  
  </header>
  <div id="section" class="post-content">
    <blockquote>
<p>UE4 Inside GamePlay 笔记</p>
</blockquote>
<h2 id="架构层"><a href="#架构层" class="headerlink" title="架构层"></a>架构层</h2><h3 id="UObject"><a href="#UObject" class="headerlink" title="UObject"></a>UObject</h3><ul>
<li>提供UE4基础功能（反射，序列化，GC等）</li>
</ul>
<h3 id="UComponent"><a href="#UComponent" class="headerlink" title="UComponent"></a>UComponent</h3><ul>
<li>基础引擎功能，非逻辑功能</li>
<li>以UComponent形式依附于Actor</li>
<li>UComponent都是平行关系，除了SceneComponent可以嵌套</li>
<li>SceneComponent 提供 Transform</li>
</ul>
<h3 id="AActor"><a href="#AActor" class="headerlink" title="AActor"></a>AActor</h3><ul>
<li>Actor类似一个容器，提供创建销毁功能</li>
<li>UComponent形式依附于Actor</li>
<li>父子关系基于SceneComponent</li>
</ul>
<h3 id="ULevel"><a href="#ULevel" class="headerlink" title="ULevel"></a>ULevel</h3><ul>
<li>当前的所有Actor保持在Level中的Actors<ul>
<li>Actors[0]存放AWroldSettingsActor</li>
<li>NetActor放在Actors后面</li>
<li>iFirstNetRelevantActor标记NetActor起始位置</li>
</ul>
</li>
<li>ALevelScriptActor继承于AActor，但是不能添加Component,除了引擎默认添加的UInputComponent</li>
</ul>
<h3 id="FWorldContext"><a href="#FWorldContext" class="headerlink" title="FWorldContext"></a>FWorldContext</h3><ul>
<li>UE4世界中每种模式(EWorldType)<ul>
<li>None 默认，未定义</li>
<li>Game 游戏世界</li>
<li>Editor 在编辑器中的世界</li>
<li>Play In Editor 的世界</li>
<li>编辑器工具的预览世界，如material editor里的世界</li>
<li>未加载的世界</li>
</ul>
</li>
<li>ThisCurrentWorld 指向当前的World</li>
<li>在World切换时，FWorldContext保存World的上下文</li>
<li>一般来说不需要直接操作这个类</li>
<li>Wolrd里保存着Level切换的上下文</li>
<li>负责World之间的切换</li>
<li>负责Level之间的切换</li>
</ul>
<h3 id="GameInstance"><a href="#GameInstance" class="headerlink" title="GameInstance"></a>GameInstance</h3><ul>
<li>GameInstance 是 WorldContexts上层类</li>
<li>GameInstance保存着当前的WorldConext和其他整个游戏的信息</li>
<li>GameInstance 独立于 Level 的切换</li>
<li>Level的切换数据应该保持在GameInstance</li>
</ul>
<h3 id="UEngine"><a href="#UEngine" class="headerlink" title="UEngine"></a>UEngine</h3><ul>
<li>UEngine有两个子类</li>
</ul>
<ol>
<li><p>UGameEngine</p>
<p> a. StandloneGmae模式下使用<br> b. 创建唯一的GameWorld<br> c. 在其中直接保存GameInstance指针</p>
</li>
<li><p>UEditorEngine</p>
<p> a. 编辑器模式下使用<br> b. EditorWorld只是用来预览的，所以没有OwningGameInstance<br> c. PlayWorld里的OwningGameInstance 间接保存GameInstance</p>
</li>
</ol>
<h2 id="逻辑层"><a href="#逻辑层" class="headerlink" title="逻辑层"></a>逻辑层</h2><h3 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h3><ol>
<li>组织一个Actor</li>
<li>单一功能</li>
<li>与游戏无关</li>
</ol>
<h3 id="Actor"><a href="#Actor" class="headerlink" title="Actor"></a>Actor</h3><ul>
<li><p>cocos</p>
<ol>
<li>直接在Node中写逻辑</li>
</ol>
</li>
<li><p>unity</p>
<ol>
<li>以Componet模式，在MonoBehavior中写逻辑</li>
</ol>
</li>
<li><p>UE4</p>
<ol>
<li>从actor派生出特定类写逻辑</li>
<li>Actor主要是提供基础功能，创建销毁，网络同步等</li>
</ol>
</li>
<li><p>InputComponent 处理接受事件所以放在actor上</p>
<ol>
<li>通过EnableInput(PlayerController)添加InputComponet</li>
<li>创建的InputComponet将会存在PlayerController.CurrentInputStack数组中</li>
</ol>
</li>
</ul>
<h3 id="Pawn"><a href="#Pawn" class="headerlink" title="Pawn"></a>Pawn</h3><ol>
<li>用来被玩家控制的</li>
<li>可被Controller控制</li>
<li>PhysicsCollision表示</li>
<li>MovementInput的基本响应接口</li>
</ol>
<h4 id="DefaultPawn"><a href="#DefaultPawn" class="headerlink" title="DefaultPawn"></a>DefaultPawn</h4><ul>
<li><p>Base类，默认带了3个方法</p>
<ol>
<li>DefaultPawnMovementComponent</li>
<li>SphericalCollisionComponent</li>
<li>StaticMeshComponent</li>
</ol>
</li>
</ul>
<h5 id="SpectatorPawn"><a href="#SpectatorPawn" class="headerlink" title="SpectatorPawn"></a>SpectatorPawn</h5><ul>
<li><p>摄像机漫游功能</p>
<ol>
<li>USpectatorPawnMovement 不带重力的漫游</li>
<li>StaticMesh 关闭</li>
</ol>
</li>
</ul>
<h4 id="Character"><a href="#Character" class="headerlink" title="Character"></a>Character</h4><ul>
<li><p>人形移动</p>
<ol>
<li>USkeletalMeshComponent</li>
<li>UCharacterMovementComponent</li>
<li>UCapsuleComponent</li>
</ol>
</li>
</ul>
<h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h3><ul>
<li>Controller和Pawn默认1:1</li>
</ul>
<ol>
<li>Controller一个时间只能控制一个Pawn,但是可以切换Pawn</li>
<li>1对1的关系更简洁且可以满足绝大数情况的需求</li>
<li>可以通过基础Controller自己实现同时控制多个Pawn</li>
</ol>
<ul>
<li>Controller 不嵌套</li>
</ul>
<ol>
<li>控制没有必要嵌套</li>
<li>控制的分层可以通过外部工具（状态机，分层状态机，行为树，GOAL）进行</li>
</ol>
<ul>
<li><p>UE4 隐藏了 Controller 渲染功能</p>
</li>
<li><p>Controller的位置意义</p>
</li>
</ul>
<ol>
<li>可以在切换Pawn时，为Pawn提供信息</li>
<li>bAttachToPawn 可以让Controller跟随Pawn移动</li>
</ol>
<ul>
<li>Controller中的逻辑</li>
</ul>
<ol>
<li>从概念上，Pawn上是执行，Controller上如何执行</li>
<li>如果是Pawn上特有的执行逻辑，可以在Pawn上执行</li>
<li>Controller生命周期比Pawn长，Pawn可以死后，又重生，这时Pawn的数据需要延续的话，可以放在Controller中</li>
</ol>
<h3 id="APlayerState"><a href="#APlayerState" class="headerlink" title="APlayerState"></a>APlayerState</h3><ol>
<li>记录PlayController的信息</li>
<li>在服务器上记录</li>
<li>虽然主要是记录PlayController的数据，但是AIController也可以读取到</li>
<li>记录在Level中</li>
</ol>
<h3 id="GameMode"><a href="#GameMode" class="headerlink" title="GameMode"></a>GameMode</h3><ol>
<li>Class登记：GameMode里登记了游戏里基本需要的类型信息</li>
<li>游戏内实体的Spawn</li>
<li>游戏进度</li>
<li>Level的切换或World的切换（第一人称，第三人才）</li>
<li>多人游戏的步调同步</li>
</ol>
<ul>
<li>游戏是由一个个World组成的，World又是由Level组成的</li>
</ul>
<p>World: 玩法或逻辑<br>Level：场景或表示</p>
<ol>
<li>一个游戏一般是一个玩法多种表现</li>
<li>一个World 多个 Level</li>
<li>World包含多个Level</li>
</ol>
<ul>
<li>多个Level配置不同的GameMode时采用的是哪一个GameMode?</li>
</ul>
<ol>
<li>一个World只会有一个GameMode</li>
<li>当有多个Level的时候，一定是PersisitentLevel和多个StreamingLevel</li>
<li>UE也只会为第一次创建World时加载PersisitentLevel的时候创建GameMode</li>
</ol>
<ul>
<li>Level迁移时GameMode是否保持一致？</li>
</ul>
<ol>
<li>bUseSeamlessTravel不开启，当前的GameMode释放掉，加载新的GameModeClass</li>
<li>bUseSeamlessTravel开启， 加载时使用GetSeamlessTravelActorList 获取GameMode</li>
</ol>
<ul>
<li>哪些逻辑应该写在GameMode里？哪些应该写在Level Blueprint里？</li>
</ul>
<ol>
<li>Level是表示，World是逻辑，跨Level的逻辑放在GameMode中（胜利条件，怪物刷新），Level中的逻辑在LevelScriptActor中（Actor的轨迹）</li>
<li>多个Level之间通用的玩法在GameMode中</li>
<li>GameMode只在Server上，Client上没有GameMode, GameMode中不要又Client逻辑，LeveiScriptActor中可以有，通过RPC同步</li>
<li>跟下层比较，GameMode关系游戏本身玩法，PlayerController关系玩家行为</li>
<li>跟上层GameInstance比较，GameInstance关注更高层的不同World之间的逻辑，GameMode之间协调工作交给GameInstance,GameMode只专注自己的玩法世界</li>
</ol>
<h3 id="GameState"><a href="#GameState" class="headerlink" title="GameState"></a>GameState</h3><ol>
<li>和APlayerState一样，GameState保存当前游戏的状态数据</li>
<li>MatchState同步游戏状态</li>
<li>PlayerArray 保存当前Client1的玩家列表，用来通过网络和其他Client交换数据</li>
</ol>
<h3 id="GameSession"><a href="#GameSession" class="headerlink" title="GameSession"></a>GameSession</h3><p>一个方便的管理类，并不存储数据</p>
<p><img src="/img/posts/ue4-gameplay-1.png" alt="image" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/img/posts/ue4-gameplay-1.png" class="lozad post-image"></p>
<h3 id="Player"><a href="#Player" class="headerlink" title="Player"></a>Player</h3><ul>
<li>UPlayer继承自UObject<ul>
<li>Player可以存在于多个Level中，所以不集成AActor</li>
</ul>
</li>
</ul>
<h4 id="ULocalPlayer"><a href="#ULocalPlayer" class="headerlink" title="ULocalPlayer"></a>ULocalPlayer</h4><ol>
<li>UGameInstance-CreatePlayer-&gt;CreatePlayerController-&gt;InitPlayerState</li>
<li>PlayerState可以是网络的，也可以是本地的</li>
</ol>
<p><img src="/img/posts/ue4-gameplay-2.jpg" alt="image" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/img/posts/ue4-gameplay-2.jpg" class="lozad post-image"></p>
<ul>
<li>为何不在LocalPlayer里编写逻辑？</li>
</ul>
<ol>
<li>在UE中Level和World有所需的所有数据，PlayerController可以获取到数据，在PlayerController最宜</li>
</ol>
<h4 id="UNetConnection"><a href="#UNetConnection" class="headerlink" title="UNetConnection"></a>UNetConnection</h4><ol>
<li>包含Socket的IpConnection也是玩家</li>
<li>UNetConnection的列表保存在UNetDriver</li>
<li>再到FWorldContext</li>
<li>最后也依然是UGameInstance</li>
<li>和LocalPlayer的列表一样，是在World上层的对象</li>
</ol>
<p><img src="/img/posts/ue4-gameplay-3.jpg" alt="image" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/img/posts/ue4-gameplay-3.jpg" class="lozad post-image"></p>
<h3 id="GameInstance-1"><a href="#GameInstance-1" class="headerlink" title="GameInstance"></a>GameInstance</h3><p><img src="/img/posts/ue4-gameplay-4.png" alt="image" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/img/posts/ue4-gameplay-4.png" class="lozad post-image"></p>
<ol>
<li><p>引擎的初始化加载，Init和ShutDown等（在引擎流程章节会详细叙述）</p>
</li>
<li><p>Player的创建，如CreateLocalPlayer，GetLocalPlayers之类的。</p>
</li>
<li><p>GameMode的重载修改，这是从4.14新增加进来改进，本来你只能为特定的某个Map配置好GameModeClass，但是现在GameInstance允许你重载它的PreloadContentForURL、CreateGameModeForURL和OverrideGameModeClass方法来hook改变这一流程。</p>
</li>
<li><p>OnlineSession的管理，这部分逻辑跟网络的机制有关（到时候再详细介绍），目前可以简单理解为有一个网络会话的管理辅助控制类。</p>
</li>
</ol>
<ul>
<li>GameInstance只有一个吗？</li>
</ul>
<ol>
<li>Game模式下只有一个，Editor模式下可以有多个<br><img src="/img/posts/ue4-gameplay-4.jpg" alt="image" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/img/posts/ue4-gameplay-4.jpg" class="lozad post-image"></li>
</ol>
<ul>
<li>哪些逻辑应该放在GameInstance？</li>
</ul>
<ol>
<li>World的切换 或 Level的打开</li>
<li>设置Player</li>
<li>UI的公用逻辑，UI在Wolrd系统之外</li>
<li>全局配置（根据平台改变一些游戏的配置，Execute一些ConsoleCommand）</li>
<li>游戏的额外第三方逻辑</li>
</ol>
<h3 id="SaveGame"><a href="#SaveGame" class="headerlink" title="SaveGame"></a>SaveGame</h3><ol>
<li>先在内存中写入一些SavegameFileVersion之类的控制文件头</li>
<li>然后再序列化USaveGame对象，接着会找到ISaveGameSystem接口</li>
<li>最后交于真正的子类实现文件的保存</li>
<li>目前的默认实现是FGenericSaveGameSystem</li>
</ol>
<p><img src="/img/posts/ue4-gameplay-5.png" alt="image" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/img/posts/ue4-gameplay-5.png" class="lozad post-image"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/24170697">总结</a></h2><p><img src="/img/posts/ue4-gameplay-6.jpg" alt="image" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/img/posts/ue4-gameplay-6.jpg" class="lozad post-image"></p>
<p><img src="/img/posts/ue4-gameplay-5.jpg" alt="image" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/img/posts/ue4-gameplay-5.jpg" class="lozad post-image"></p>

  </div>
  <div>
  
  </div>
</article>
<div class="nav">
  
  <div class="nav-item-prev">
    <a href="/2021/05/07/ue4-nextanim/" class="nav-link">
      <i class="iconfont icon-left nav-prev-icon"></i>
      <div>
        <div class="nav-label">Prev</div>
        
        <div class="nav-title">NextAnim 解析 </div>
        
      </div>
    </a>
  </div>
  
  
  <div class="nav-item-next">
    <a href="/2021/05/01/unlua-tutorial/" class="nav-link">
      <div>
        <div class="nav-label">Next</div>
        
        <div class="nav-title">UnLua入门 </div>
        
      </div>
      <i class="iconfont icon-right nav-next-icon"></i>
    </a>
  </div>
  
</div>

<div class="card card-content toc-card" id="mobiletoc">
  <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>TOC</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84%E5%B1%82"><span class="toc-text">架构层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UObject"><span class="toc-text">UObject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UComponent"><span class="toc-text">UComponent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AActor"><span class="toc-text">AActor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ULevel"><span class="toc-text">ULevel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FWorldContext"><span class="toc-text">FWorldContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameInstance"><span class="toc-text">GameInstance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UEngine"><span class="toc-text">UEngine</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%B1%82"><span class="toc-text">逻辑层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Component"><span class="toc-text">Component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Actor"><span class="toc-text">Actor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pawn"><span class="toc-text">Pawn</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DefaultPawn"><span class="toc-text">DefaultPawn</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SpectatorPawn"><span class="toc-text">SpectatorPawn</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Character"><span class="toc-text">Character</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Controller"><span class="toc-text">Controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#APlayerState"><span class="toc-text">APlayerState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameMode"><span class="toc-text">GameMode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameState"><span class="toc-text">GameState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameSession"><span class="toc-text">GameSession</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Player"><span class="toc-text">Player</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ULocalPlayer"><span class="toc-text">ULocalPlayer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UNetConnection"><span class="toc-text">UNetConnection</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameInstance-1"><span class="toc-text">GameInstance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SaveGame"><span class="toc-text">SaveGame</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol>
</div></main>
          <aside class="left-column">
            
            <div class="card card-author">
              
<img src="/img/icon.jpg" class="author-img">

<p class="author-name">小冰狼</p>
<p class="author-description">A IT Worker</p>
<div class="author-message">
  <a class="author-posts-count" href="/archives">
    <span>28</span>
    <span>Posts</span>
  </a>
  <a class="author-categories-count" href="/categories">
    <span>2</span>
    <span>Categories</span>
  </a>
  <a class="author-tags-count" href="/tags">
    <span>7</span>
    <span>Tags</span>
  </a>
</div>

<div class="author-card-society">
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://github.com/hulefei">
        <i class="iconfont icon-github society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a href="mailto:hulefei29@gmail.com.com">
        <i class="iconfont icon-mail society-icon"></i>
      </a>
    </div>
  
</div>

            </div>
            
            <div class="sticky-tablet">
  
  
  <article class="display-when-two-columns spacer">
    <div class="card card-content toc-card">
      <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>TOC</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84%E5%B1%82"><span class="toc-text">架构层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UObject"><span class="toc-text">UObject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UComponent"><span class="toc-text">UComponent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AActor"><span class="toc-text">AActor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ULevel"><span class="toc-text">ULevel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FWorldContext"><span class="toc-text">FWorldContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameInstance"><span class="toc-text">GameInstance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UEngine"><span class="toc-text">UEngine</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%B1%82"><span class="toc-text">逻辑层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Component"><span class="toc-text">Component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Actor"><span class="toc-text">Actor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pawn"><span class="toc-text">Pawn</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DefaultPawn"><span class="toc-text">DefaultPawn</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SpectatorPawn"><span class="toc-text">SpectatorPawn</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Character"><span class="toc-text">Character</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Controller"><span class="toc-text">Controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#APlayerState"><span class="toc-text">APlayerState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameMode"><span class="toc-text">GameMode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameState"><span class="toc-text">GameState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameSession"><span class="toc-text">GameSession</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Player"><span class="toc-text">Player</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ULocalPlayer"><span class="toc-text">ULocalPlayer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UNetConnection"><span class="toc-text">UNetConnection</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameInstance-1"><span class="toc-text">GameInstance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SaveGame"><span class="toc-text">SaveGame</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol>
    </div>
  </article>
  
  
  <article class="card card-content">
    <div class="categories-card">
  <div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right: 2px;"></i>Categories</div>
  <div class="categories-list">
    
      <a href="/categories/文档">
        <div class="categories-list-item">
          文档
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/笔记">
        <div class="categories-list-item">
          笔记
          <span class="categories-list-item-badge">26</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content">
    <div class="tags-card">
  <div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right: 2px;"></i>hot tags</div>
  <div class="tags-list">
    
    <a href="\tags\UE4" title="UE4"><div class="tags-list-item">UE4</div></a>
    
    <a href="\tags\Algorithms" title="Algorithms"><div class="tags-list-item">Algorithms</div></a>
    
    <a href="\tags\LUA" title="LUA"><div class="tags-list-item">LUA</div></a>
    
    <a href="\tags\Hexo" title="Hexo"><div class="tags-list-item">Hexo</div></a>
    
    <a href="\tags\Algorithnms" title="Algorithnms"><div class="tags-list-item">Algorithnms</div></a>
    
    <a href="\tags\CPP" title="CPP"><div class="tags-list-item">CPP</div></a>
    
    <a href="\tags\学习观" title="学习观"><div class="tags-list-item">学习观</div></a>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
          <aside class="right-column">
            <div class="sticky-widescreen">
  
  
  <article class="card card-content toc-card">
    <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>TOC</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84%E5%B1%82"><span class="toc-text">架构层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UObject"><span class="toc-text">UObject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UComponent"><span class="toc-text">UComponent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AActor"><span class="toc-text">AActor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ULevel"><span class="toc-text">ULevel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FWorldContext"><span class="toc-text">FWorldContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameInstance"><span class="toc-text">GameInstance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UEngine"><span class="toc-text">UEngine</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%B1%82"><span class="toc-text">逻辑层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Component"><span class="toc-text">Component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Actor"><span class="toc-text">Actor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pawn"><span class="toc-text">Pawn</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DefaultPawn"><span class="toc-text">DefaultPawn</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SpectatorPawn"><span class="toc-text">SpectatorPawn</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Character"><span class="toc-text">Character</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Controller"><span class="toc-text">Controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#APlayerState"><span class="toc-text">APlayerState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameMode"><span class="toc-text">GameMode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameState"><span class="toc-text">GameState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameSession"><span class="toc-text">GameSession</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Player"><span class="toc-text">Player</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ULocalPlayer"><span class="toc-text">ULocalPlayer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UNetConnection"><span class="toc-text">UNetConnection</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GameInstance-1"><span class="toc-text">GameInstance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SaveGame"><span class="toc-text">SaveGame</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol>
  </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right: 2px;"></i>Recent Posts</div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-05-07</div>
        <a href="/2021/05/07/ue4-nextanim/"><div class="recent-posts-item-content">NextAnim 解析</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-05-06</div>
        <a href="/2021/05/06/ue4-gameplay/"><div class="recent-posts-item-content">UE4 GamePlay</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-05-01</div>
        <a href="/2021/05/01/unlua-tutorial/"><div class="recent-posts-item-content">UnLua入门</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-05-01</div>
        <a href="/2021/05/01/ue4-uobject/"><div class="recent-posts-item-content">UObject</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
        </div>
      </div>
    </div>
  </div>
  
  <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>Copyright ©
          
          2021 -
          
          2021
        </span>
        <a href="/" class="footer-link">小冰狼 </a>
      </div>
    </div>

    
    <div class="footer-dsc">
      
      
      Powered by
      <a href="https://hexo.io/" class="footer-link" target="_blank" rel="nofollow noopener noreferrer">&nbsp;Hexo </a>
      
      
      <span>&nbsp;|&nbsp;</span>
      
      
      
      Theme -
      <a href="https://github.com/theme-kaze" class="footer-link" target="_blank"
        rel="nofollow noopener noreferrer">&nbsp;Kaze</a>
      
    </div>
    
    
    
    
</footer>
  <a role="button" id="scrollbutton" class="basebutton" >
  <i class="iconfont icon-arrowleft button-icon"></i>
</a>
<a role="button" id="menubutton" class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a role="button" id="popbutton" class="basebutton">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a role="button" id="darkbutton" class="basebutton darkwidget">
  <i class="iconfont icon-weather button-icon"></i>
</a>

  
  
  

  
  
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
      };
    </script>
    
<script src="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js"></script>

  

  
  
  <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img');
    var i;
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a');
      wrapper.setAttribute('data-fslightbox', 'gallery');
      wrapper.setAttribute('href', img[i].getAttribute('data-src'));
      wrapper.setAttribute('style', 'width: 100%; display: flex; justify-content: center;');
      img[i].parentElement.insertBefore(wrapper, img[i]);
      wrapper.appendChild(img[i]);
    }
    refreshFsLightbox();
  }
</script>
<script>loadScript("//cdn.jsdelivr.net/npm/fslightbox@3.1.0/index.min.js", addImgLayout)</script>
  
  
  
<script src="/js/main.js"></script>

  
  
  <script>
    var addLazyload = function () {
      var observer = lozad('.lozad', {
        load: function (el) {
          el.srcset = el.getAttribute('data-src');
        },
        loaded: function (el) {
          el.classList.add('loaded');
        }
      });
      observer.observe();
    }
  </script>
  <script>loadScript("/js/lib/lozad.min.js", addLazyload)</script>
  
  
</body>

</html>